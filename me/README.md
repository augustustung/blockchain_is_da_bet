# T·ª± h·ªçc BLOCKCHAIN üöÇüöÇüöÇ Ng√†y 1

## 1. Gi·ªõi thi·ªáu v·ªÅ Solidity
* Contract:

> Contract l√† kh·ªëi x√¢y d·ª±ng c∆° b·∫£n c·ªßa c√°c ·ª©ng d·ª•ng Ethereum - t·∫•t c·∫£ c√°c bi·∫øn v√† ch·ª©c nƒÉng ƒë·ªÅu thu·ªôc v·ªÅ m·ªôt h·ª£p ƒë·ªìng v√† ƒë√¢y s·∫Ω l√† ƒëi·ªÉm kh·ªüi ƒë·∫ßu c·ªßa t·∫•t c·∫£ c√°c d·ª± √°n c·ªßa b·∫°n. 

```
pragma solidity >=0.5.0 <0.6.0;

contract HelloWorld {

}
```

* Struct:

> T·∫°o struct:
```
struct Person {
  uint age;
  string name;
}
```

> Struct v·ªõi array:
```
Person[] people; // dynamic Array, we can keep adding to it
```

* Private/ Public/ Internal/ External:

> Private: ch·ªâ c√°c h√†m trong body c·ªßa contract n√≥ g·ªçi ƒë∆∞·ª£c
> Public: ƒë√∫ng nh∆∞ t√™n
> Internal: Gi·ªëng private nh∆∞ng nh·ªØng contract th·ª´a k·∫ø c≈©ng g·ªçi ƒë∆∞·ª£c.
> External: ch·ªâ c√≥ th·ªÉ g·ªçi b√™n ngo√†i contract


* Function:

> Tr·∫£ v·ªÅ gi√° tr·ªã:
```
function sayHello() public returns (string memory) {
  return greeting;
}

```

> `view function`: ch·ªâ xem v√† kh√¥ng ch·ªânh s·ª≠a ƒë∆∞·ª£c
```
function sayHello() public view returns (string memory) {}
```

> `pure function`: kh√¥ng th·ªÉ truy c·∫≠p v√†o d·ªØ li·ªáu b√™n trong

```
function _multiply(uint a, uint b) private pure returns (uint) {
  return a * b;
}
```

* Keccak256 v√† Typecasting:

> M√£ ho√° Keccak256:
```
keccak256(abi.encodePacked("aaaab"));
//6e91ec6b618bb462a4a6ee5aa2cb0e9cf30f7a052bb467b0ba58b8748c00d2e5
```

> Typecasting(√âp ki·ªÉu d·ªØ li·ªáu):
```
uint8 a = 5;
uint b = 6;
// c√≥ l·ªói v√¨ a * b tr·∫£ v·ªÅ a uint, kh√¥ng ph·∫£i uint8:
uint8 c = a * b;
// ph·∫£i √©p ki·ªÉu d·ªØ li·ªáu cho b gi·ªëng a uint8 ƒë·ªÉ l√†m n√≥ ho·∫°t ƒë·ªông ƒë√∫ng nh∆∞ mong mu·ªën:
uint8 c = a * uint8(b);
```

* S·ª± ki·ªán (Events):

> S·ª± ki·ªán (Events) l√† c√°ch ƒë·ªÉ m√† contract giao ti·∫øp v·ªõi c√°i g√¨ ƒë√≥ ƒëang di·ªÖn ra trong blockchain, c√°i m√† c√≥ th·ªÉ 'listening' c√°c s·ª± ki·ªán nh·∫•t ƒë·ªãnh v√† th·ª±c hi·ªán h√†ng ƒë·ªông khi ch√∫ng x·∫£y ra.

```
// khai b√°o s·ª± ki·ªán
event IntegersAdded(uint x, uint y, uint result);

function add(uint _x, uint _y) public returns (uint) {
  uint result = _x + _y;
  // g·ªçi s·ª± ki·ªán cho ·ª©ng d·ª•ng bi·∫øt h√†m ƒë√£ ƒë∆∞·ª£c g·ªçi:
  emit IntegersAdded(_x, _y, result);
  return result;
}
``` 

> Giao di·ªán ng∆∞·ªùi d√πng ·ª©ng d·ª•ng c√≥ th·ªÉ l·∫Øng nghe s·ª± ki·ªán. Tri·ªÉn khai javascript s·∫Ω tr√¥ng gi·ªëng nh∆∞ sau:
```
YourContract.IntegersAdded(function(error, result) {
  // do something with result
})
```

```javascript
// Here's how we would access our contract:
var abi = /* abi generated by the compiler */
var ZombieFactoryContract = web3.eth.contract(abi)
var contractAddress = /* our contract address on Ethereum after deploying */
var ZombieFactory = ZombieFactoryContract.at(contractAddress)
// `ZombieFactory` has access to our contract's public functions and events

// some sort of event listener to take the text input:
$("#ourButton").click(function(e) {
  var name = $("#nameInput").val()
  // Call our contract's `createRandomZombie` function:
  ZombieFactory.createRandomZombie(name)
})

// Listen for the `NewZombie` event, and update the UI
var event = ZombieFactory.NewZombie(function(error, result) {
  if (error) return
  generateZombie(result.zombieId, result.name, result.dna)
})

// take the Zombie dna, and update our image
function generateZombie(id, name, dna) {
  let dnaStr = String(dna)
  // pad DNA with leading zeroes if it's less than 16 characters
  while (dnaStr.length < 16)
    dnaStr = "0" + dnaStr

  let zombieDetails = {
    // first 2 digits make up the head. We have 7 possible heads, so % 7
    // to get a number 0 - 6, then add 1 to make it 1 - 7. Then we have 7
    // image files named "head1.png" through "head7.png" we load based on
    // this number:
    headChoice: dnaStr.substring(0, 2) % 7 + 1,
    // 2nd 2 digits make up the eyes, 11 variations:
    eyeChoice: dnaStr.substring(2, 4) % 11 + 1,
    // 6 variations of shirts:
    shirtChoice: dnaStr.substring(4, 6) % 6 + 1,
    // last 6 digits control color. Updated using CSS filter: hue-rotate
    // which has 360 degrees:
    skinColorChoice: parseInt(dnaStr.substring(6, 8) / 100 * 360),
    eyeColorChoice: parseInt(dnaStr.substring(8, 10) / 100 * 360),
    clothesColorChoice: parseInt(dnaStr.substring(10, 12) / 100 * 360),
    zombieName: name,
    zombieDescription: "A Level 1 CryptoZombie",
  }
  return zombieDetails
}
```